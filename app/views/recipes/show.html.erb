<div class="recipe-show">
  <h1><%= @recipe.title %></h1>
  <%= image_tag(@recipe.image, alt: @recipe.title) if @recipe.image.present? %>
  <p class="small"><%= @recipe.summary.gsub(/<a\b[^>]*>(.*?)<\/a>/i, '\1').html_safe %></p>

  <h2>Ingredients</h2>
  <div>
    <ul>
      <% @recipe.ingredients.each do |ingredient| %>
        <li><%= "#{ingredient.amount} #{ingredient.unit} #{ingredient.name}" %></li>
      <% end %>
    </ul>
  </div>

  <h2>Instructions</h2>
  <p><%= raw @recipe.instructions %></p>
</div>

<%= form_with url: "/dashboard/recipes", method: :post do %>
  <%= hidden_field_tag :title, @recipe.title %>
  <%= hidden_field_tag :recipe_id, @recipe.id %>
  <%= hidden_field_tag :image , @recipe.image %>
  <%= hidden_field_tag :summary, @recipe.summary %>
  <%= hidden_field_tag :instructions, @recipe.instructions %>
  <%= hidden_field_tag :ingredients, @recipe.ingredients.map(&:attributes) %>
  <%= submit_tag "Add Recipe to my dashboard" %>
<% end %>

<h2>Email this Recipe</h2>
<%= form_with url: "/email_recipe", method: :post  do |f| %>
    <%= f.label "Email" %>
    <%= f.text_field :recipient_email %>
    <%= f.hidden_field :recipe_id, value: @recipe.id %>
    <%= f.submit "send it off" %>
<% end  %>
